---
publishDate: 2023-08-11T00:00:00Z
updateDate: 2023-08-11T00:00:00Z
title: HLASM入門
description: z/OSオペレーティングシステム向けIBM高水準アセンブラ（HLASM）入門
excerpt: Ehrman本の勝手訳によるHLASM入門
category: programming
icon: vscode-icons:file-type-assembly
tags:
  - assembly
draft: true
---

## このシリーズについて

本ブログ記事シリーズは、John R. Ehrman著『Assember Language Programming for IBM System z Servers』（以下、Ehrman本）の内容を適当に選抜して勝手翻訳したものである。本書を選定した理由は以下の通り。

- 著者はHLASMの作者であり、記述の信頼性が高い
- 記述が網羅的である。大学のテキストとしても使われることを想定しているため、計算機アーキテクチャや計算機科学の初歩を意識した記述となっている
   - 分岐やループなどの制御構造を持つ高級言語に慣れ親しんだ読者であれば、初学者・独学者でもなんとか読むことができる
- 数多くの練習問題が掲載されている
  - また、完全な回答も掲載されている
- IBM高水準アセンブラ言語（HLASM）は [^1] 、ネットで参照できる日本語文献に初心者向けのものがないため（特に、教科書的に読めるような文献がないため）、勝手翻訳であっても有益である（と筆者は信じている）

## 翻訳について

勝手翻訳は翻案権の侵害となる可能性について、ここで筆者の自分勝手な考えを述べる。以下の理由により、権利侵害の度合いは低いものと独断と偏見により信ずる。

- 本記事は（筆者個人の勉強目的もあるが）日本語圏でHLASMを今後学ぶ人達のために専ら情報共有することを目的としており、公益目的によるものである
  - HLASMはいわゆるメインフレーム専用のアセンブリ言語であり、ナレッジが消失しつつある技術である。ナレッジ消失により、特にメインフレームを利用している基幹産業のシステム保守が立ち行かなくなれば、それすなわち社会問題となるようなシステム障害が顕在化する可能性があることを意味する。そのため、HLASM作者本人の手による高品質な教育資料を広く一般に共有することには、高い公益性がある
- 原著は無料でネット公開されており、原著者が広く読まれることを意図して公開している（はず）
  - 原著者は死去しているため、真意不明
  - そのため、言い訳をする前に権利者に一報しろという批判は甘んじて受けますが、どこに連絡すればいいのか分からないためアクションを起こせていません…
- <del>内容がかなりニッチで今後商用翻訳が現れるとも思えない</del>

なお、原著は1300ページ超の大著であるため、全量翻訳はまったく目指さない。逐次訳もせず、原文が言わんとするところを勝手に汲んで言い回しをどんどん変える。本稿を読めば、HLASMで普通にプログラムが書ける程度になるような記載ぶりを目指す。

---

## はじめに

コンピュータは以下の異なる5つの水準から見ることができる。

- 第1水準。論理回路を設計するエンジニアからの視点。コンピュータは電気信号を制御し命令するためのデバイスの集合である。
- 第2水準。論理回路を組み合わせて計算をさせるエンジニアとしての視点。コンピュータはレジスタ、スイッチ、制御メカニズムの集合であり、それらにより加算、減算などの演算を行い解を得る
- 第3水準。アセンブリプログラマの視点。コンピュータの基本的な操作を、単一の算術演算、単純なデータ移動、単一のデータのテストを行うレベルで考えるものである。
- 第4水準。高級言語プログラマの視点。コンピュータの基本的な操作は、数式評価や代入、データブロックの移動、計数やテスト操作の制御であると考える。
- 第5水準。アプリケーションプログラマの視点。現実の問題となるアプリケーション（交通シミュレーション、データ抽出、ネットワーク分析などなんでも）を実現するために書かれる抽象化されたコード

それぞれの隣接する水準が、ことさら他方から区別されるわけではない。本書では上記の異なる水準のうち、第3水準に焦点を合わせる。ただし、後々「隣接する」水準の観点からもコンピュータとは何かを考察する。乗算やブランチングなどについて論理回路レベルでの挙動を理解していると有用なこともあるし（第2水準）、より大きな文脈でオペレーションを実施するときマクロ命令のようなグループ化された命令列を考えると便利なこともある（第4水準）。

我々が今最も関心がある第3水準とは、ありていに言えばアセンブラ言語プログラミング、アセンブラコーディングなどと呼ばれる領域のことである。本書ではHLASMとして知られる、z/OS & z/VM & Z/VSE向けIBM高レベルアセンブラ言語を記述する。

ある所要の機械語命令とデータを実行可能な形式で得るためには、いくつかのプログラムの助けを必要とする： 我々にとって最も重要なのはアセンブラである。他に重要なプログラムはリンカとOSのスーパーバイザである。それぞれ適切な文脈で後に考察をおこなう。

## 参考文献

- [IBM | z/Architecture Principles of Operation (pdf)](https://www.ibm.com/docs/en/SSQ2R2_15.0.0/com.ibm.tpf.toolkit.hlasm.doc/dz9zr006.pdf)
- [IBM | Language Reference (pdf)](https://www-40.ibm.com/servers/resourcelink/svc00100.nsf/pages/zOSV2R3sc264940/$file/asmr1023.pdf)
- [John R. Ehrman | Assembler Language Programming for IBM System z Servers (pdf)](http://zseries.marist.edu/enterprisesystemseducation/assemblerlanguageresources/Assembler.V2.alntext%20V2.00.pdf)


[^1]: 一般に言語のことを「アセンブリ」、アセンブリを機械語に変換するプログラムを「アセンブラ」と呼ぶ。しかし、IBMの用語法では、言語のことも「アセンブラ」と呼ぶ。言語の呼び方は個人的にどちらでもよいという考えであるため、言語としてのアセンブリについては区別しないでアセンブリ・アセンブラと気分で呼び方を変える（プログラムとしての「アセンブラ」をアセンブリと呼ぶのはダメ）。
